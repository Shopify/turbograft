<div id="page-header" refresh="page">
  <h1>Page <span id='page-number'><%= @id %></span></h1>
  <p>Click the links below to perform a full page refresh:</p>
  <p><%= link_to "back", :back %> | <%= link_to "next", page_path(@next_id) %></p>
  <p>Back to the <%= link_to "beginning", page_path(1) %></p>
</div>

<%= link_to "Perform a full refresh", html_with_noscript_pages_path %>

<hr>

<p>Here's a fieldset, vaguely representing some client state.  Enter some values.</p>
<fieldset>
  <div class="field">
    <%= label_tag :name, "Name" %>
    <%= text_field_tag :name %>
  </div>
  <div class="field">
    <%= label_tag :nickname, "Nickname" %>
    <%= text_field_tag :nickname %>
  </div>
</fieldset>

<p>Now click this link to partially refresh only the header of this page.</p>
<a href="#" id="partial-refresh-page" refresh="page" onclick="event.preventDefault(); Page.refresh({
  url: '<%= page_path(@next_id) %>',
  onlyKeys: ['page']
});">Go to next page via partial refresh</a>

<hr>

<div id='section-a' refresh='section-a' style="padding: 1em; margin: 1em; background: rgb(<%= rand(255) %>, <%= rand(255) %>, <%= rand(255) %>);">
  <h3>Section A</h3>
  You can refresh any section of the page you like, provided there is an ID and a refresh key.
  This section provides a random number from the server:
  <span id="random-number-a"><%= rand(1000) %></span>
</div>
<div id='section-b' refresh='section-b' style="padding: 1em; margin: 1em; background: rgb(<%= rand(255) %>, <%= rand(255) %>, <%= rand(255) %>);">
  <h3>Section B</h3>
  <span id="random-number-b"><%= rand(1000) %></span>
</div>
<% @id ||= 1 %>
<p>
  <a id='refresh-a' href="#" onclick="event.preventDefault(); Page.refresh({
  url: '<%= page_path(@id) %>',
  onlyKeys: ['section-a']
});">Refresh Section A</a>
</p>
<p>
  <a id='refresh-b' href="#" onclick="event.preventDefault(); Page.refresh({
  url: '<%= page_path(@id) %>',
  onlyKeys: ['section-b']
});">Refresh Section B</a>
</p>
<p>
  <a id='refresh-a-and-b' href="#" onclick="event.preventDefault(); Page.refresh({
  url: '<%= page_path(@id) %>',
  onlyKeys: ['section-a', 'section-b']
});">Refresh Section A and B</a>
</p>

<div refresh-never>
  <p>I should never be refreshed.  This only applies when doing a partial refresh, however.  Here's another random number: <span class="refresh-never-random-number"><%= rand(1000) %></span>
  </p>
</div>
